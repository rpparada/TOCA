{% extends "base.html" %}
{% load static %}
{% load humanize %}
{% load thumbnail %}
{% block title %} | MIS TOCATAS{% endblock %}
{% block content %}
{% include 'partials/_alerts.html' %}

<!-- Page title -->
<section id="page-title">
    <div class="container">
        <div class="page-title">
            <h1>Data Tables</h1>
            <span>Inspiration comes of working every day.</span>
        </div>
        <div class="breadcrumb">
            <ul>
                <li><a href="#">Home</a> </li>
                <li><a href="#">Components</a> </li>
                <li class="active"><a href="#">Data Tables</a> </li>
            </ul>
        </div>
    </div>
</section>
<!-- end: Page title -->

{% if mistocatas %}
<!-- Page Content -->
<section id="page-content" class="no-sidebar">
    <div class="container">
        <!-- DataTable -->
        <form action="{% url 'creartocata' %}">
        <div class="row mb-3">
            <div class="col-lg-6">
                <h4>DataTables</h4>
                <p>Add advanced interaction controls to your HTML tables</p>
            </div>
            <div class="col-lg-6 text-right">

                <button type="submit" class="btn btn-light"><i class="icon-plus"></i> Crear Tocata</button>

                <div id="export_buttons" class="mt-2"></div>
            </div>
        </div>
        </form>

        <div class="row">
            <div class="col-lg-12">
                <table id="datatable" class="table table-bordered table-hover" style="width:100%">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Lugar</th>
                            <th>Fecha y Hora</th>
                            <th>Costo</th>
                            <th>Asistentes Min/Max/Total</th>
                            <th>Estado</th>
                            <th class="noExport">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                      {% for tocata in mistocatas %}
                        <tr>
                            <td>{{ tocata.nombre }}</td>
                            {% if tocata.lugar %}
                            <td>{{ tocata.lugar.region.nombre }}, {{ tocata.lugar.comuna.nombre }}</td>
                            {% else %}
                            <td> --- En busqueda de local --- </td>
                            {% endif %}
                            <td>{{ tocata.fecha }}, {{ tocata.hora}}</td>
                            <td>${{ tocata.costo|intcomma }}</td>
                            <td>{{ tocata.asistentes_min }} / {{ tocata.asistentes_max }} / {{ tocata.asistentes_total }}</td>
                            {% if tocata.estado == 'IN' %} <!-- 'inicial': 'IN' -->
                              <td><span class="badge badge-pill badge-info">{{ tocata.get_estado_display }}</span></td>
                            {% elif tocata.estado == 'PU' %} <!-- 'publicado': 'PU' -->
                              <td><span class="badge badge-pill badge-warning">{{ tocata.get_estado_display }}</span></td>
                            {% elif tocata.estado == 'SU' %} <!-- 'suspendido': 'SU' -->
                              <td><span class="badge badge-pill badge-danger">{{ tocata.get_estado_display }}</span></td>
                            {% elif tocata.estado == 'AP' %} <!-- 'aplazado': 'AP' -->
                              <td><span class="badge badge-pill badge-danger">{{ tocata.get_estado_display }}</span></td>
                            {% elif tocata.estado == 'CN' %} <!-- 'confirmado': 'CN' -->
                              <td><span class="badge badge-pill badge-primary">{{ tocata.get_estado_display }}</span></td>
                            {% elif tocata.estado == 'CM' %} <!-- 'completado': 'CM' -->
                              <td><span class="badge badge-pill badge-success">{{ tocata.get_estado_display }}</span></td>
                            {% endif %}
                            <td>
                                <a class="ml-2" href="{% url 'borrartocata' tocata.id %}" data-toggle="tooltip" data-original-title="Delete"><i class="icon-trash-2"></i></a>
                            </td>
                        </tr>
                      {% endfor %}
                    </tbody>
                    <tfoot>
                        <tr>
                          <th>Nombre</th>
                          <th>Lugar</th>
                          <th>Fecha y Hora</th>
                          <th>Costo</th>
                          <th>Asistentes Min/Max</th>
                          <th>Estado</th>
                          <th>Acciones</th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <!-- end: DataTable -->
    </div>
</section>
<!-- end: Page Content -->
{% endif %}

{% endblock %}
